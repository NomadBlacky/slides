# Readable Code in Scala

## Scala関西Summit2018

門脇 拓巳 (@blac_k_ey)

---

## 自己紹介

+ 門脇 拓巳 (かどわき たくみ)
+ 所属: 株式会社セプテーニ・オリジナル
+ GitHub: NomadBlacky
+ Twitter: @blac_k_ey

---

## 本発表について

+ 読みにくいコードをリファクタリングして得られた知見
+ 読みやすいコードを書くためのTips

などをお話します。

「ある程度Scalaに慣れたけど、Scalaらしく書けているのかな…?」  
…というような初心者の方を対象としています。

---

## ストーリー

※以下はフィクションです

+++

PO「突然だけど、来月からこのプロジェクトの開発に加わって欲しいんだ。」

入社から3ヶ月…  
会社での仕事も慣れてきた自分に降りかかってきたのはPOからのある一言だった。

+++

PO「媒体のAPIアップデートが控えていて、そろそろ対応しなきゃまずいんだ。」

PO「ただ、リソースが足りていなくて…君の力が必要なんだ！頼むよ！」

人間、頼られると嫌な気持ちはしないものだ。  
（まっ、やってやりますか）と心に思い、  
早速そのプロジェクトのリポジトリをクローンしてみる。

+++

`scalaVersion := "2.11.7"`

`addSbtPlugin("com.typesafe.play" % "sbt-plugin" % "2.4.3")`

（まぁ、ちょっと古いけどこんなものだよね…）

+++

（改修する箇所のコード読んでみるか…）

安心(?)したのもつかの間、目に飛び込んできたのは度肝を抜くコードだった…

+++

！?

---

### このコード読めますか?

+++

```scala
class Hoge {
  def foo(): Bar = {
    for {
      a <- func1
      b <- func2
    } yield Bar(a, b)
  }
}
```

+++


---

## リファクタリングしてみよう

---

## そのほか読みやすいコードを書くためのTips

---

## まとめ

+ 読みにくいコードの多くは「大きな」コード
  + 小さな関数に処理を切りだそう
  + ネストが深くならないように気をつけよう
+ for式を使いこなそう
  + ジェネレータを関数に切り出すことで処理の流れを記述できる
+ 目的の処理が実現できるAPIが提供されてないか探してみよう
